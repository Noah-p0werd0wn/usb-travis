;Copyright (c) #G__YYYY_# #USERDOMAIN#. All Rights Reserved.
;
; Module Name: #G_TARGET_OUTPUT_NAME#.inf
; Description: Installation inf for the LibUsbDotNet benchmark device.
;
; THIS CODE AND INFORMATION IS PROVIDED "AS IS" WITHOUT WARRANTY OF ANY
; KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
; IMPLIED WARRANTIES OF MERCHANTABILITY AND/OR FITNESS FOR A PARTICULAR
; PURPOSE.
;

[Strings]
MfgName="Travis Robinson"
;
Benchmark_Device="Benchmark Device"
Benchmark_Device_00="Benchmark Device Intf 0"
Benchmark_Device_01="Benchmark Device Intf 1"
;
Benchmark_Device_00_HWID="#G_BENCHMARK_DEVICE_HWID#&MI_00"
Benchmark_Device_01_HWID="#G_BENCHMARK_DEVICE_HWID#&MI_01"
Benchmark_Device_HWID="#G_BENCHMARK_DEVICE_HWID#"
;
SourceDisksNames_NTX86="#G_TARGET_OUTPUT_NAME# KMDF v#KMDFVERSION# x86 Installation Disk",,,
SourceDisksNames_NTAMD64="#G_TARGET_OUTPUT_NAME# KMDF v#KMDFVERSION# amd64 Installation Disk",,,

[Version]
Signature="$WINDOWS NT$"
Class=LUsbWClass
ClassGuid={ECFB0CFD-74C4-4f52-BBF7-343461CD72AC}
Provider=%MfgName%
DriverVer=#G__MM_#/#G__DD_#/#G__YYYY_#, #TARGET_VERSION#
CatalogFile=#G_TARGET_OUTPUT_NAME#.cat

; ============== Class section ==================
[ClassInstall32]
AddReg=LUsbW_Class_AddReg     

[LUsbW_Class_AddReg]
HKR,,,0,"#G_TARGET_OUTPUT_NAME# USB Devices"
HKR,,Icon,,-5

; ============== Device section =================
[Manufacturer]
%MfgName%=LUsbW_DeviceGroup,NTX86,NTAMD64

; For Win2K
[LUsbW_DeviceGroup]
%Benchmark_Device_00%=LUsbW_Device, %Benchmark_Device_00_HWID%
%Benchmark_Device_01%=LUsbW_Device, %Benchmark_Device_01_HWID%
%Benchmark_Device%=LUsbW_Device, %Benchmark_Device_HWID%

; For XP and later
[LUsbW_DeviceGroup.NTX86]
%Benchmark_Device_00%=LUsbW_Device, %Benchmark_Device_00_HWID%
%Benchmark_Device_01%=LUsbW_Device, %Benchmark_Device_01_HWID%
%Benchmark_Device%=LUsbW_Device, %Benchmark_Device_HWID%

[LUsbW_DeviceGroup.NTAMD64]
%Benchmark_Device_00%=LUsbW_Device, %Benchmark_Device_00_HWID%
%Benchmark_Device_01%=LUsbW_Device, %Benchmark_Device_01_HWID%
%Benchmark_Device%=LUsbW_Device, %Benchmark_Device_HWID%

[LUsbW_Device.NT.HW]
AddReg=LUsbW_Device_HW_AddReg

[LUsbW_Device.NTAMD64.HW]
AddReg=LUsbW_Device_HW_AddReg

[LUsbW_Device_HW_AddReg]
HKR,,DeviceInterfaceGUIDs, 0x10000,"#G_BENCHMARK_DEVICE_GUID#"

; ========== Driver/Servce section ==============
[LUsbW_Device.NT.Services]
Addservice=#G_TARGET_OUTPUT_NAME#,2,LUsbW_AddService

[LUsbW_Device.NTAMD64.Services]
Addservice=#G_TARGET_OUTPUT_NAME#,2,LUsbW_AddService

[LUsbW_AddService]
DisplayName="#G_TARGET_OUTPUT_NAME# USB Driver v#TARGET_VERSION# - #G__MM_#/#G__DD_#/#G__YYYY_# (KMDF v#KMDFVERSION#)"
ServiceType=1
StartType=3
ErrorControl=1
ServiceBinary=%12%\#G_TARGET_OUTPUT_FILENAME#
AddReg=LUsbW_Driver_AddReg

; This optional entry identifies the load order group of which this driver is a member.
; LoadOrderGroup=Base

[LUsbW_Driver_AddReg]
HKR,"Parameters","DebugLevel",0x10001,4

; =========== Sources/Destinations ==============
;
[SourceDisksNames]
1=%SourceDisksNames_NTX86%
2=%SourceDisksNames_NTAMD64%

[SourceDisksFiles.x86]
#G_TARGET_OUTPUT_FILENAME#	= 1,i386
#G_TARGET_OUTPUT_NAME#.dll	= 1,i386
libusb-1.0.dll	= 1,i386
libusb0.dll		= 1,i386
WdfCoInstaller#KMDFCOINSTALLERVERSION#.dll=1,i386

[SourceDisksFiles.amd64]
#G_TARGET_OUTPUT_FILENAME#		= 2,x64
#G_TARGET_OUTPUT_NAME#.dll		= 2,x64
libusb-1.0.dll		= 2,x64
libusb0.dll			= 2,x64
#G_TARGET_OUTPUT_NAME#_x86.dll	= 2,x64
libusb-1.0_x86.dll	= 2,x64
libusb0_x86.dll		= 2,x64
WdfCoInstaller#KMDFCOINSTALLERVERSION#.dll=2,x64

[DestinationDirs]
DefaultDestDir				= 12
CoInstaller_CopyFiles		= 11
libusb_files_sys       		= 10,system32\drivers
libusb_files_dll	  		= 10,system32
libusb_files_dll_syswow64	= 10,syswow64

[libusb_files_sys]
#G_TARGET_OUTPUT_FILENAME#

[libusb_files_dll]
#G_TARGET_OUTPUT_NAME#.dll
libusb-1.0.dll
libusb0.dll

[libusb_files_dll_syswow64]
#G_TARGET_OUTPUT_NAME#.dll, #G_TARGET_OUTPUT_NAME#_x86.dll
libusb-1.0.dll, libusb-1.0_x86.dll
libusb0.dll, libusb0_x86.dll

[LUsbW_Device.NT]
CopyFiles = libusb_files_sys, libusb_files_dll

[LUsbW_Device.NTAMD64]
CopyFiles = libusb_files_sys, libusb_files_dll, libusb_files_dll_syswow64

; ========= WDF/CoInstaller section =============
[LUsbW_Device.NT.CoInstallers]
AddReg=CoInstaller_AddReg
CopyFiles=CoInstaller_CopyFiles

[CoInstaller_CopyFiles]
WdfCoInstaller#KMDFCOINSTALLERVERSION#.dll

[CoInstaller_AddReg]
HKR,,CoInstallers32,0x00010000, "WdfCoInstaller#KMDFCOINSTALLERVERSION#.dll,WdfCoInstaller"

[LUsbW_Device.NT.Wdf]
KmdfService = #G_TARGET_OUTPUT_NAME#, LUsbW_wdfsect

[LUsbW_Device.NTAMD64.Wdf]
KmdfService = #G_TARGET_OUTPUT_NAME#, LUsbW_wdfsect

[LUsbW_wdfsect]
KmdfLibraryVersion=#KMDFVERSION#
